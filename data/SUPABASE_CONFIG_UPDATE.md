# Supabase Configuration Update

**Date:** December 9, 2025  
**Project:** ESG Demo Platform

## Updated Configuration

The Supabase settings for the ESG_Beta project have been updated to the new project instance.

### New Settings

- **Project URL:** `https://hespvaxdbxgvkrojlxqq.supabase.co`
- **Project API Key (anon):** `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhlc3B2YXhkYnhndmtyb2pseHFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMDE0NTUsImV4cCI6MjA4MDg3NzQ1NX0.QIcpk0Ehg_hPX3fDMPq8WkgrHRGzuWbQEqf8xkFVkhg`

### Configuration Details

- **Data API:** Enabled (autogenerated HTTP APIs + Postgres protocol)
- **Schema:** Public schema for Data API
- **Postgres Type:** Standard Postgres

### Files Updated

1. **`js/data-layer.js`** (lines 18-19)
   - Updated `SUPABASE_URL` constant
   - Updated `SUPABASE_KEY` constant

### Previous Configuration (Replaced)

- **Old Project URL:** `https://holpoyfxbhnzwsnkcnua.supabase.co`
- **Old API Key:** `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvbHBveWZ4YmhuendzbmtjbnVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMjE3NjAsImV4cCI6MjA4MDc5Nzc2MH0.CtizrnbEI9aogI7csbo3qIDgb1pzzxW5uKLfTWuZ3YY`

## Implementation Notes

The ESG Demo Platform uses a unified data layer (`data-layer.js`) that combines:
- **Primary:** Supabase (multi-user, real-time, persistent)
- **Fallback:** LocalStorage (offline, single-user, development)

The Supabase client is initialized automatically when the library is loaded, with graceful fallback to LocalStorage mode if Supabase is unavailable.

## Next Steps

1. **Test Connection:** Verify the new Supabase instance is accessible
2. **Database Schema:** Ensure all required tables exist in the new instance
3. **Data Migration:** If needed, migrate data from the old instance to the new one
4. **Environment Variables:** Consider moving sensitive keys to environment variables for production

## Reference Code

```javascript
// Supabase Configuration
const SUPABASE_URL = 'https://hespvaxdbxgvkrojlxqq.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhlc3B2YXhkYnhndmtyb2pseHFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMDE0NTUsImV4cCI6MjA4MDg3NzQ1NX0.QIcpk0Ehg_hPX3fDMPq8WkgrHRGzuWbQEqf8xkFVkhg';

// Initialize Supabase client
if (typeof supabase !== 'undefined') {
    const { createClient } = supabase;
    db = createClient(SUPABASE_URL, SUPABASE_KEY);
    isSupabaseAvailable = true;
}
```
